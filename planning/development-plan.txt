Mole Buster - Development Plan

Goal:
Build a Hytopia game where players move around a grassy field and hit moles popping out of holes, with multiple game modes, scoring, and leaderboards.

Phase 1 – Project & Foundation
1. Review existing setup (index.ts, index.mjs, assets/ui/index.html, tsconfig.json) to understand current bootstrapping.
2. Create base folder structure:
   - src/server, src/client, src/shared
   - content, data, docs
3. Document overall architecture in docs/tech/architecture.md (client/server/shared, game modes, persistence).

Phase 2 – Shared Contracts & Config
4. Define shared types in src/shared/types/:
   - GameMode, MoleType, LeaderboardEntry, PlayerProfile.
5. Define shared config in src/shared/config/GameBalanceConfig.ts:
   - Spawn time range (3–15s), mole type odds, per-mode tuning.
6. Define networking contracts in src/shared/messages/:
   - Events and payloads for MOLE_SPAWNED, MOLE_DESPAWNED, MOLE_HIT, SCORE_UPDATED, MATCH_STARTED, MATCH_ENDED, LEADERBOARD_UPDATE.

Phase 3 – Server Core & Mole Systems
7. Implement server bootstrap in src/server/core/ServerBootstrap.ts and PlayerSessionManager.
8. Implement mole entities in src/server/entities/:
   - Mole, MoleTypes, MoleHole.
9. Implement MoleSpawnSystem in src/server/systems/:
   - Random spawns from holes with 3–15 second visibility, emits spawn/despawn events.
10. Implement HitDetectionSystem and ScoringSystem:
   - Validate hit requests, apply mole point values, update scores, emit SCORE_UPDATED.

Phase 4 – Game Modes
11. Create game mode framework:
   - BaseGameMode interface and GameModeRegistry.
12. Implement TimedMode (single-player, 3-minute match).
13. Implement ScoreChaseMode (multiplayer, race to 100 points).
14. Implement VersusMode (multiplayer, color-based positive/negative scoring).

Phase 5 – Persistence & Leaderboards
15. Implement ProfileService and LeaderboardService in src/server/services/.
16. Wire persistence:
   - Save personal best high score and quickest Score Chase.
   - Maintain leaderboards in data/leaderboards and update clients.

Phase 6 – Client Core, UI & HUD
17. Implement client state and networking:
   - ClientGameState, PlayerState, network client using shared messages.
18. Build screens:
   - LobbyScreen (mode selection, personal bests).
   - GameScreen (3D view + HUD).
   - ResultsScreen (match summary, PB indicators).
19. Build HUD components:
   - ScoreDisplay, TimerDisplay, ModeIndicator, HitFeedback.
20. Implement PlayerInput:
   - Map input to hit actions, send hit requests to server.

Phase 7 – Visuals, Content & Audio
21. Integrate field and mole models in assets/models/moles/ (standard, deluxe, penalty).
22. Configure field layout and holes from content/maps (or assets/map.json) and spawn MoleHole entities.
23. Hook up audio:
   - Background music and SFX for mole pop, hit, and penalty feedback.

Phase 8 – Testing, Balancing & Polish
24. Add automated tests:
   - Server systems (mole spawning, scoring, game modes), shared config, core client UI.
25. Balance gameplay:
   - Tune spawn rates, mole mix, penalties via GameBalanceConfig and content/moles JSON.
26. Polish UX and robustness:
   - Handle disconnects/rejoins, edge cases, and improve clarity of mode rules and feedback.


